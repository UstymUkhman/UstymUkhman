$dissolve-easing: cubic-bezier(0.645,  0.045, 0.355, 1.000);
$letters: 24;

div#written-message {
  display: block;
  z-index: $z-message;

  @include size($max);
  @include position(relative, $null);

  p.message-text {
    position: absolute;
    @include white-rabbit;
    @include transition(opacity 0.5s ease-out);

    &.fade-out {
      opacity: 0;
    }

    &.dissolve {
      span {
        opacity: 0;
      }
    }

    span {
      @include transition(opacity 0.5s $dissolve-easing);

      @for $i from 1 through $letters {
        &:nth-child(#{$i}) {
          $delay: getRandom(1000, 2000);
          transition-delay: #{$delay}ms;
        }
      }
    }
  }

  &.hidden-message {
    visibility: hidden;
  }
}
